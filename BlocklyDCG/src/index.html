<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>

        <!-- blockly scripts -->
        <script src="blockly/blockly_uncompressed.js"></script>

        <!-- generator script -->
        <script src="blockly/generators/dcg.js"></script>

        <!-- blockly language -->
        <script src="blockly/msg/js/nl.js"></script>
        <script src="blockly/blocks/eval.js"></script>

        <script src="blockly/blocks/logic.js"></script>
        <script src="blockly/blocks/loops.js"></script>
        <script src="blockly/blocks/math.js"></script>
        <script src="blockly/blocks/text.js"></script>
        <script src="blockly/blocks/lists.js"></script>
        <script src="blockly/blocks/variables.js"></script>
        <script src="blockly/blocks/procedures.js"></script>



        <!-- python examples -->
        <script src="blockly/generators/python/text.js"></script>


        <!-- dcg examples -->
        <script src="blockly/generators/dcg/text.js"></script>
        <script src="blockly/generators/dcg/variables.js"></script>

    </head>
    <body>

        <!-- Add your site or application content here -->
        <p>DCG editor</p>



        <div id="blocklyDiv" style="height: 700px; width: 800px;"></div>

        <xml id="toolbox" style="display: none">
            <!--<block type="controls_if"></block>-->
            <!--<block type="logic_compare"></block>-->
            <!--<block type="controls_repeat_ext"></block>-->
            <!-- <block type="math_number"></block> -->
            <!--<block type="math_arithmetic"></block>-->
            <block type="text"></block>
            <block type="text_append"></block>
            <block type="text_print"></block>
            <block type="variables_set"></block>
            <block type="variables_get"></block>
            <block type="eval"></block>
            <!--<block type="procedures_defnoreturn"></block>-->
        </xml>

        <textarea id="ruletext">
            test
        </textarea>

        <button onclick="generateCode()">generate</button>

        <script>
            var workspace = Blockly.inject('blocklyDiv',
                {media: '../../media/',
                    toolbox: document.getElementById('toolbox')});

            function generateCode() {
                var code = Blockly.Dcg.workspaceToCode(workspace);
                document.getElementById('ruletext').innerHTML = code;
                console.log("set code: " + code)
            }
        </script>

    </body>
</html>
